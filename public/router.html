<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
<!-- hash模式下：模拟router-link -->
    <!-- <a href="#/">首页</a>
    <a href="#/about">关于</a> -->
    <!-- 如果不是a标签，可以用click事件 -->
    <!-- <span onclick="routerChange('/learn')">课程学习span</span>
    <span onclick="routerChange('/student')">学员展示span</span> -->

    <!-- hash模式下：模拟router-view  -->
    <!-- <div id="view"></div> -->


<!-- history模式下:模拟router-link  -->
    <!-- 因为a标签的href会自动刷新跳转，这里就不能用href属性了，用onclick事件 -->
    <a onclick="routerChange('/')">首页</a>
    <a onclick="routerChange('/about')">关于</a>

    <div id="view"></div>

    <script>
    //hash模式下

        // 监听加载完毕事件,页面上所有dom加载完毕时，触发事件。onload事件是所有的资源加载完毕
        // document.addEventListener('DOMContentLoaded', () => {
        //     view.innerHTML = location.hash.slice(1);
        // })
        // //hashchange事件，当hash改变时触发函数
        // window.addEventListener('hashchange', () => {
        //     // console.log('hashchange', location);
        //     // 通过location获取hash值
        //     view.innerHTML = location.hash.slice(1);
        // })
        
        // function routerChange(pathname) {
        //     // console.log(pathname);
        //     location.hash = pathname;
        // }


    // history模式下
        function routerChange(pathname) {
            // pushState() 是HTML5新接口，可以改变网址(存在跨域限制)而不刷新页面
            //history.pushState() 实现路径的更改
            history.pushState(null, null, pathname);
            view.innerHTML = location.pathname;
        }
        // 监听浏览器的前进和后退事件，前进或后退时，会触发事件,改变页面
        window.addEventListener('popstate', () => {
            view.innerHTML = location.pathname;
        })


    </script>
</body>
</html>

<!-- hash模式和history模式的区别：hash是通过#锚点进行跳转，url会更改，浏览器可以前进和后退、浏览器不刷新，不和服务端有交流，永远不会把请求发送到后台
    history 无锚点、无hash，会和服务端交流，因为是正常规范的url，当访问路径的时候，肯定会访问到后台的，所以需要服务端的同事配合 -->